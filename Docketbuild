To deploy a Java application (Docker image) to Amazon EKS (Elastic Kubernetes Service) using Azure DevOps, you can follow these high-level steps:

â¸»

âœ… Overview of the Pipeline
	1.	Build Java Application and Docker Image
	2.	Push Docker Image to Amazon ECR (Elastic Container Registry)
	3.	Deploy to EKS using kubectl

â¸»

ğŸ”§ Prerequisites
	â€¢	Java application with a Dockerfile
	â€¢	EKS cluster running and accessible
	â€¢	Amazon ECR repository created
	â€¢	Azure DevOps service connection to AWS (via service principal or IAM credentials)
	â€¢	kubectl and aws CLI installed in the agent or pipeline

â¸»

ğŸ“ Project Structure (Example)

.
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ deployment.yaml       # Kubernetes manifest
â”œâ”€â”€ service.yaml          # Kubernetes service (optional)
â”œâ”€â”€ src/                  # Java source
â”œâ”€â”€ pom.xml or build.gradle


â¸»

ğŸ§ª Sample Azure DevOps Pipeline (YAML)

trigger:
- main

variables:
  AWS_REGION: us-east-1
  ECR_REPOSITORY: your-ecr-repo-name
  ECR_REGISTRY: <your_aws_account_id>.dkr.ecr.$(AWS_REGION).amazonaws.com
  IMAGE_TAG: $(Build.BuildId)

stages:
- stage: BuildAndPush
  jobs:
  - job: Build
    pool:
      vmImage: 'ubuntu-latest'
    steps:
    - task: GitVersion@5
      displayName: 'Determine version'

    - task: Maven@3
      displayName: 'Build Java Project'
      inputs:
        mavenPomFile: 'pom.xml'
        goals: 'package'

    - task: Docker@2
      displayName: 'Build Docker Image'
      inputs:
        command: build
        Dockerfile: '**/Dockerfile'
        tags: |
          $(IMAGE_TAG)

    - task: ECRPushImage@1
      displayName: 'Push to ECR'
      inputs:
        awsCredentials: 'AWS-Service-Connection'
        regionName: '$(AWS_REGION)'
        imageSource: 'imageId'
        sourceImageId: '$(Build.Repository.Name):$(IMAGE_TAG)'
        repositoryName: '$(ECR_REPOSITORY)'
        pushTag: '$(IMAGE_TAG)'

- stage: Deploy
  jobs:
  - job: DeployToEKS
    pool:
      vmImage: 'ubuntu-latest'
    steps:
    - task: AWSCLI@1
      inputs:
        awsCredentials: 'AWS-Service-Connection'
        regionName: '$(AWS_REGION)'
        command: 'eks update-kubeconfig --name your-eks-cluster-name'

    - script: |
        kubectl apply -f deployment.yaml
        kubectl apply -f service.yaml
      displayName: 'Deploy to EKS'


â¸»

ğŸ“œ Sample deployment.yaml

apiVersion: apps/v1
kind: Deployment
metadata:
  name: java-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: java-app
  template:
    metadata:
      labels:
        app: java-app
    spec:
      containers:
      - name: java-app
        image: <your_aws_account_id>.dkr.ecr.us-east-1.amazonaws.com/your-ecr-repo-name:latest
        ports:
        - containerPort: 8080


â¸»

ğŸ” Notes on Authentication
	â€¢	Use AWS Service Connection in Azure DevOps:
	â€¢	Go to Project Settings â†’ Service Connections â†’ Add new â†’ AWS
	â€¢	Use an IAM user with ECR and EKS permissions

â¸»

ğŸ“Œ Optional Enhancements
	â€¢	Add Helm support for cleaner deployment
	â€¢	Use kubectl rollout status or kubectl get pods for post-deploy verification
	â€¢	Add environment-specific deployment (e.g., dev/staging/prod)

â¸»

Would you like me to:
	â€¢	Help you write the Dockerfile?
	â€¢	Add Helm support?
	â€¢	Generate the Java sample project too?

Let me know what youâ€™d like to go deeper into.
